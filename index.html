<!DOCTYPE html>
<html>

<head>
    <title>Image Viewer</title>
    <script>
        document.cookie = "CloudFront-Signature=b6jw3iiqlebJksx6UPXdgBHPnXGaiTYTrOzMQhWHfyaDx8D56ZHneZBwHii9czmwJuAoi1GemHI05lQaoNAyRntCuZIzN~zs-QVzopDQUD970opoC37RBJpj6FUM1Ldjyvo9QQBmGqR8gZ1ZwjCxfvm-JHBBUTDf9~xlWLT8vH69zjjGPEXSDyN82vEupOu2P49IL3NDt9uOyGo9C5pxj3UtelhlZSctkoM8P8KvYqTOY~BiqP35MAHyoMyiDLEmnrG9s1mAuzaNTKeIGYr1biv1A7-bx5n39oTdTo2tFlm23AG4W0CM5IoAqJSJ1It4rp1t68ZboEcDQEohi0-3RQ__; Path=/; Secure; SameSite=None";
        document.cookie = "CloudFront-Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jb250ZW50LmdlbjIuYWkvKiIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTY5NjU1ODUxOH19fV19; Path=/; Secure; SameSite=None";
        document.cookie = "CloudFront-Key-Pair-Id=KRCVY93K4RJDS; Path=/; Secure; SameSite=None";
    </script>
</head>

<body>
    <h1>Image Viewer</h1>

    <h2>Images:</h2>
    <div id="content">

    </div>
    <script>
        async function loadImageWithCookies(url, imgElement) {
            try {
                let imgElem = document.createElement('img');

                // Fetch the image with cookies included in the request
                let res = await fetch(url, { credentials: 'include', mode: 'cors' });

                // Check if the response status is OK (200)
                if (res.status === 200) {
                    imgElem.src = URL.createObjectURL(await res.blob());

                    let contentDiv = document.getElementById('content');
                    contentDiv.appendChild(imgElem);
                    contentDiv.appendChild(document.createElement('br'));
                } else {
                    console.error('Failed to load image:', res.status, res.statusText);
                }
            } catch (error) {
                console.error('Error loading image:', error);
            }
        }

        loadImageWithCookies('https://content.gen2.ai/local/org_id/test2.png');
        loadImageWithCookies('https://content.gen2.ai/local/org_id/test.png');
        loadImageWithCookies('https://content.gen2.ai/local/org_id/project_id/test.png');
    </script>
</body>

</html>
